{"version":3,"file":"row.js","names":["_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","protoProps","staticProps","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","call","Number","_","require","Enums","colCache","Cell","Row","worksheet","number","_worksheet","_number","_cells","style","outlineLevel","get","value","commit","_commitRow","destroy","findCell","colNumber","getCellEx","address","cell","col","column","getColumn","getCell","getColumnKey","l2n","encodeAddress","row","splice","start","count","nKeep","_len","arguments","inserts","Array","_key","nExpand","nEnd","cSrc","cDst","_comment","eachCell","options","iteratee","includeEmpty","n","forEach","index","type","ValueType","Null","addPageBreak","lft","rght","ws","left","Math","max","right","pb","id","man","min","rowBreaks","push","values","set","_this","offset","hasOwnProperty","item","eachColumnKey","some","_applyStyle","name","numFmt","font","alignment","protection","border","fill","_hidden","_outlineLevel","properties","outlineLevelRow","cells","cellModel","model","height","hidden","collapsed","_this2","Error","previousAddress","Types","Merge","decodeAddress","_previousAddress","$col$row","concat","n2l","JSON","parse","stringify","module","exports"],"sources":["../../../lib/doc/row.js"],"sourcesContent":["'use strict';\r\n\r\nconst _ = require('../utils/under-dash');\r\n\r\nconst Enums = require('./enums');\r\nconst colCache = require('../utils/col-cache');\r\nconst Cell = require('./cell');\r\n\r\nclass Row {\r\n  constructor(worksheet, number) {\r\n    this._worksheet = worksheet;\r\n    this._number = number;\r\n    this._cells = [];\r\n    this.style = {};\r\n    this.outlineLevel = 0;\r\n  }\r\n\r\n  // return the row number\r\n  get number() {\r\n    return this._number;\r\n  }\r\n\r\n  get worksheet() {\r\n    return this._worksheet;\r\n  }\r\n\r\n  // Inform Streaming Writer that this row (and all rows before it) are complete\r\n  // and ready to write. Has no effect on Worksheet document\r\n  commit() {\r\n    this._worksheet._commitRow(this); // eslint-disable-line no-underscore-dangle\r\n  }\r\n\r\n  // helps GC by breaking cyclic references\r\n  destroy() {\r\n    delete this._worksheet;\r\n    delete this._cells;\r\n    delete this.style;\r\n  }\r\n\r\n  findCell(colNumber) {\r\n    return this._cells[colNumber - 1];\r\n  }\r\n\r\n  // given {address, row, col}, find or create new cell\r\n  getCellEx(address) {\r\n    let cell = this._cells[address.col - 1];\r\n    if (!cell) {\r\n      const column = this._worksheet.getColumn(address.col);\r\n      cell = new Cell(this, column, address.address);\r\n      this._cells[address.col - 1] = cell;\r\n    }\r\n    return cell;\r\n  }\r\n\r\n  // get cell by key, letter or column number\r\n  getCell(col) {\r\n    if (typeof col === 'string') {\r\n      // is it a key?\r\n      const column = this._worksheet.getColumnKey(col);\r\n      if (column) {\r\n        col = column.number;\r\n      } else {\r\n        col = colCache.l2n(col);\r\n      }\r\n    }\r\n    return (\r\n      this._cells[col - 1] ||\r\n      this.getCellEx({\r\n        address: colCache.encodeAddress(this._number, col),\r\n        row: this._number,\r\n        col,\r\n      })\r\n    );\r\n  }\r\n\r\n  // remove cell(s) and shift all higher cells down by count\r\n  splice(start, count, ...inserts) {\r\n    const nKeep = start + count;\r\n    const nExpand = inserts.length - count;\r\n    const nEnd = this._cells.length;\r\n    let i;\r\n    let cSrc;\r\n    let cDst;\r\n\r\n    if (nExpand < 0) {\r\n      // remove cells\r\n      for (i = start + inserts.length; i <= nEnd; i++) {\r\n        cDst = this._cells[i - 1];\r\n        cSrc = this._cells[i - nExpand - 1];\r\n        if (cSrc) {\r\n          cDst = this.getCell(i);\r\n          cDst.value = cSrc.value;\r\n          cDst.style = cSrc.style;\r\n          // eslint-disable-next-line no-underscore-dangle\r\n          cDst._comment = cSrc._comment;\r\n        } else if (cDst) {\r\n          cDst.value = null;\r\n          cDst.style = {};\r\n          // eslint-disable-next-line no-underscore-dangle\r\n          cDst._comment = undefined;\r\n        }\r\n      }\r\n    } else if (nExpand > 0) {\r\n      // insert new cells\r\n      for (i = nEnd; i >= nKeep; i--) {\r\n        cSrc = this._cells[i - 1];\r\n        if (cSrc) {\r\n          cDst = this.getCell(i + nExpand);\r\n          cDst.value = cSrc.value;\r\n          cDst.style = cSrc.style;\r\n          // eslint-disable-next-line no-underscore-dangle\r\n          cDst._comment = cSrc._comment;\r\n        } else {\r\n          this._cells[i + nExpand - 1] = undefined;\r\n        }\r\n      }\r\n    }\r\n\r\n    // now add the new values\r\n    for (i = 0; i < inserts.length; i++) {\r\n      cDst = this.getCell(start + i);\r\n      cDst.value = inserts[i];\r\n      cDst.style = {};\r\n      // eslint-disable-next-line no-underscore-dangle\r\n      cDst._comment = undefined;\r\n    }\r\n  }\r\n\r\n  // Iterate over all non-null cells in this row\r\n  eachCell(options, iteratee) {\r\n    if (!iteratee) {\r\n      iteratee = options;\r\n      options = null;\r\n    }\r\n    if (options && options.includeEmpty) {\r\n      const n = this._cells.length;\r\n      for (let i = 1; i <= n; i++) {\r\n        iteratee(this.getCell(i), i);\r\n      }\r\n    } else {\r\n      this._cells.forEach((cell, index) => {\r\n        if (cell && cell.type !== Enums.ValueType.Null) {\r\n          iteratee(cell, index + 1);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  // ===========================================================================\r\n  // Page Breaks\r\n  addPageBreak(lft, rght) {\r\n    const ws = this._worksheet;\r\n    const left = Math.max(0, lft - 1) || 0;\r\n    const right = Math.max(0, rght - 1) || 16838;\r\n    const pb = {\r\n      id: this._number,\r\n      max: right,\r\n      man: 1,\r\n    };\r\n    if (left) pb.min = left;\r\n\r\n    ws.rowBreaks.push(pb);\r\n  }\r\n\r\n  // return a sparse array of cell values\r\n  get values() {\r\n    const values = [];\r\n    this._cells.forEach(cell => {\r\n      if (cell && cell.type !== Enums.ValueType.Null) {\r\n        values[cell.col] = cell.value;\r\n      }\r\n    });\r\n    return values;\r\n  }\r\n\r\n  // set the values by contiguous or sparse array, or by key'd object literal\r\n  set values(value) {\r\n    // this operation is not additive - any prior cells are removed\r\n    this._cells = [];\r\n    if (!value) {\r\n      // empty row\r\n    } else if (value instanceof Array) {\r\n      let offset = 0;\r\n      if (value.hasOwnProperty('0')) {\r\n        // contiguous array - start at column 1\r\n        offset = 1;\r\n      }\r\n      value.forEach((item, index) => {\r\n        if (item !== undefined) {\r\n          this.getCellEx({\r\n            address: colCache.encodeAddress(this._number, index + offset),\r\n            row: this._number,\r\n            col: index + offset,\r\n          }).value = item;\r\n        }\r\n      });\r\n    } else {\r\n      // assume object with column keys\r\n      this._worksheet.eachColumnKey((column, key) => {\r\n        if (value[key] !== undefined) {\r\n          this.getCellEx({\r\n            address: colCache.encodeAddress(this._number, column.number),\r\n            row: this._number,\r\n            col: column.number,\r\n          }).value = value[key];\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  // returns true if the row includes at least one cell with a value\r\n  get hasValues() {\r\n    return _.some(this._cells, cell => cell && cell.type !== Enums.ValueType.Null);\r\n  }\r\n\r\n  get cellCount() {\r\n    return this._cells.length;\r\n  }\r\n\r\n  get actualCellCount() {\r\n    let count = 0;\r\n    this.eachCell(() => {\r\n      count++;\r\n    });\r\n    return count;\r\n  }\r\n\r\n  // get the min and max column number for the non-null cells in this row or null\r\n  get dimensions() {\r\n    let min = 0;\r\n    let max = 0;\r\n    this._cells.forEach(cell => {\r\n      if (cell && cell.type !== Enums.ValueType.Null) {\r\n        if (!min || min > cell.col) {\r\n          min = cell.col;\r\n        }\r\n        if (max < cell.col) {\r\n          max = cell.col;\r\n        }\r\n      }\r\n    });\r\n    return min > 0\r\n      ? {\r\n          min,\r\n          max,\r\n        }\r\n      : null;\r\n  }\r\n\r\n  // =========================================================================\r\n  // styles\r\n  _applyStyle(name, value) {\r\n    this.style[name] = value;\r\n    this._cells.forEach(cell => {\r\n      if (cell) {\r\n        cell[name] = value;\r\n      }\r\n    });\r\n    return value;\r\n  }\r\n\r\n  get numFmt() {\r\n    return this.style.numFmt;\r\n  }\r\n\r\n  set numFmt(value) {\r\n    this._applyStyle('numFmt', value);\r\n  }\r\n\r\n  get font() {\r\n    return this.style.font;\r\n  }\r\n\r\n  set font(value) {\r\n    this._applyStyle('font', value);\r\n  }\r\n\r\n  get alignment() {\r\n    return this.style.alignment;\r\n  }\r\n\r\n  set alignment(value) {\r\n    this._applyStyle('alignment', value);\r\n  }\r\n\r\n  get protection() {\r\n    return this.style.protection;\r\n  }\r\n\r\n  set protection(value) {\r\n    this._applyStyle('protection', value);\r\n  }\r\n\r\n  get border() {\r\n    return this.style.border;\r\n  }\r\n\r\n  set border(value) {\r\n    this._applyStyle('border', value);\r\n  }\r\n\r\n  get fill() {\r\n    return this.style.fill;\r\n  }\r\n\r\n  set fill(value) {\r\n    this._applyStyle('fill', value);\r\n  }\r\n\r\n  get hidden() {\r\n    return !!this._hidden;\r\n  }\r\n\r\n  set hidden(value) {\r\n    this._hidden = value;\r\n  }\r\n\r\n  get outlineLevel() {\r\n    return this._outlineLevel || 0;\r\n  }\r\n\r\n  set outlineLevel(value) {\r\n    this._outlineLevel = value;\r\n  }\r\n\r\n  get collapsed() {\r\n    return !!(\r\n      this._outlineLevel && this._outlineLevel >= this._worksheet.properties.outlineLevelRow\r\n    );\r\n  }\r\n\r\n  // =========================================================================\r\n  get model() {\r\n    const cells = [];\r\n    let min = 0;\r\n    let max = 0;\r\n    this._cells.forEach(cell => {\r\n      if (cell) {\r\n        const cellModel = cell.model;\r\n        if (cellModel) {\r\n          if (!min || min > cell.col) {\r\n            min = cell.col;\r\n          }\r\n          if (max < cell.col) {\r\n            max = cell.col;\r\n          }\r\n          cells.push(cellModel);\r\n        }\r\n      }\r\n    });\r\n\r\n    return this.height || cells.length\r\n      ? {\r\n          cells,\r\n          number: this.number,\r\n          min,\r\n          max,\r\n          height: this.height,\r\n          style: this.style,\r\n          hidden: this.hidden,\r\n          outlineLevel: this.outlineLevel,\r\n          collapsed: this.collapsed,\r\n        }\r\n      : null;\r\n  }\r\n\r\n  set model(value) {\r\n    if (value.number !== this._number) {\r\n      throw new Error('Invalid row number in model');\r\n    }\r\n    this._cells = [];\r\n    let previousAddress;\r\n    value.cells.forEach(cellModel => {\r\n      switch (cellModel.type) {\r\n        case Cell.Types.Merge:\r\n          // special case - don't add this types\r\n          break;\r\n        default: {\r\n          let address;\r\n          if (cellModel.address) {\r\n            address = colCache.decodeAddress(cellModel.address);\r\n          } else if (previousAddress) {\r\n            // This is a <c> element without an r attribute\r\n            // Assume that it's the cell for the next column\r\n            const {row} = previousAddress;\r\n            const col = previousAddress.col + 1;\r\n            address = {\r\n              row,\r\n              col,\r\n              address: colCache.encodeAddress(row, col),\r\n              $col$row: `$${colCache.n2l(col)}$${row}`,\r\n            };\r\n          }\r\n          previousAddress = address;\r\n          const cell = this.getCellEx(address);\r\n          cell.model = cellModel;\r\n          break;\r\n        }\r\n      }\r\n    });\r\n\r\n    if (value.height) {\r\n      this.height = value.height;\r\n    } else {\r\n      delete this.height;\r\n    }\r\n\r\n    this.hidden = value.hidden;\r\n    this.outlineLevel = value.outlineLevel || 0;\r\n\r\n    this.style = (value.style && JSON.parse(JSON.stringify(value.style))) || {};\r\n  }\r\n}\r\n\r\nmodule.exports = Row;\r\n"],"mappings":"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"}