{"version":3,"file":"composite-xform.js","names":["BaseXform","require","CompositeXform","_BaseXform","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","createNewModel","node","parseOpen","parser","map","name","tag","model","parseText","text","onParserClose","parseClose","undefined","module","exports"],"sources":["../../../../lib/xlsx/xform/composite-xform.js"],"sourcesContent":["const BaseXform = require('./base-xform');\r\n\r\n/* 'virtual' methods used as a form of documentation */\r\n/* eslint-disable class-methods-use-this */\r\n\r\n// base class for xforms that are composed of other xforms\r\n// offers some default implementations\r\nclass CompositeXform extends BaseXform {\r\n  createNewModel(node) {\r\n    return {};\r\n  }\r\n\r\n  parseOpen(node) {\r\n    // Typical pattern for composite xform\r\n    this.parser = this.parser || this.map[node.name];\r\n    if (this.parser) {\r\n      this.parser.parseOpen(node);\r\n      return true;\r\n    }\r\n\r\n    if (node.name === this.tag) {\r\n      this.model = this.createNewModel(node);\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  parseText(text) {\r\n    // Default implementation. Send text to child parser\r\n    if (this.parser) {\r\n      this.parser.parseText(text);\r\n    }\r\n  }\r\n\r\n  onParserClose(name, parser) {\r\n    // parseClose has seen a child parser close\r\n    // now need to incorporate into this.model somehow\r\n    this.model[name] = parser.model;\r\n  }\r\n\r\n  parseClose(name) {\r\n    // Default implementation\r\n    if (this.parser) {\r\n      if (!this.parser.parseClose(name)) {\r\n        this.onParserClose(name, this.parser);\r\n        this.parser = undefined;\r\n      }\r\n      return true;\r\n    }\r\n\r\n    return name !== this.tag;\r\n  }\r\n}\r\n\r\nmodule.exports = CompositeXform;\r\n"],"mappings":";;;;;;;;;;;;;;;AAAA,IAAMA,SAAS,GAAGC,OAAO,CAAC,cAAc,CAAC;;AAEzC;AACA;;AAEA;AACA;AAAA,IACMC,cAAc,0BAAAC,UAAA;EAAAC,SAAA,CAAAF,cAAA,EAAAC,UAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,cAAA;EAAA,SAAAA,eAAA;IAAAK,eAAA,OAAAL,cAAA;IAAA,OAAAG,MAAA,CAAAG,KAAA,OAAAC,SAAA;EAAA;EAAAC,YAAA,CAAAR,cAAA;IAAAS,GAAA;IAAAC,KAAA,EAClB,SAAAC,eAAeC,IAAI,EAAE;MACnB,OAAO,CAAC,CAAC;IACX;EAAC;IAAAH,GAAA;IAAAC,KAAA,EAED,SAAAG,UAAUD,IAAI,EAAE;MACd;MACA,IAAI,CAACE,MAAM,GAAG,IAAI,CAACA,MAAM,IAAI,IAAI,CAACC,GAAG,CAACH,IAAI,CAACI,IAAI,CAAC;MAChD,IAAI,IAAI,CAACF,MAAM,EAAE;QACf,IAAI,CAACA,MAAM,CAACD,SAAS,CAACD,IAAI,CAAC;QAC3B,OAAO,IAAI;MACb;MAEA,IAAIA,IAAI,CAACI,IAAI,KAAK,IAAI,CAACC,GAAG,EAAE;QAC1B,IAAI,CAACC,KAAK,GAAG,IAAI,CAACP,cAAc,CAACC,IAAI,CAAC;QACtC,OAAO,IAAI;MACb;MAEA,OAAO,KAAK;IACd;EAAC;IAAAH,GAAA;IAAAC,KAAA,EAED,SAAAS,UAAUC,IAAI,EAAE;MACd;MACA,IAAI,IAAI,CAACN,MAAM,EAAE;QACf,IAAI,CAACA,MAAM,CAACK,SAAS,CAACC,IAAI,CAAC;MAC7B;IACF;EAAC;IAAAX,GAAA;IAAAC,KAAA,EAED,SAAAW,cAAcL,IAAI,EAAEF,MAAM,EAAE;MAC1B;MACA;MACA,IAAI,CAACI,KAAK,CAACF,IAAI,CAAC,GAAGF,MAAM,CAACI,KAAK;IACjC;EAAC;IAAAT,GAAA;IAAAC,KAAA,EAED,SAAAY,WAAWN,IAAI,EAAE;MACf;MACA,IAAI,IAAI,CAACF,MAAM,EAAE;QACf,IAAI,CAAC,IAAI,CAACA,MAAM,CAACQ,UAAU,CAACN,IAAI,CAAC,EAAE;UACjC,IAAI,CAACK,aAAa,CAACL,IAAI,EAAE,IAAI,CAACF,MAAM,CAAC;UACrC,IAAI,CAACA,MAAM,GAAGS,SAAS;QACzB;QACA,OAAO,IAAI;MACb;MAEA,OAAOP,IAAI,KAAK,IAAI,CAACC,GAAG;IAC1B;EAAC;EAAA,OAAAjB,cAAA;AAAA,EA7C0BF,SAAS;AAgDtC0B,MAAM,CAACC,OAAO,GAAGzB,cAAc"}