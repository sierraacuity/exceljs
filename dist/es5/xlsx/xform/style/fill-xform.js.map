{"version":3,"file":"fill-xform.js","names":["BaseXform","require","ColorXform","StopXform","_BaseXform","_inherits","_super","_createSuper","_this","_classCallCheck","call","map","color","_createClass","key","get","value","render","xmlStream","model","openNode","addAttribute","position","closeNode","parseOpen","node","parser","name","parseFloat","attributes","parseText","parseClose","undefined","PatternFillXform","_BaseXform2","_super2","_this2","fgColor","bgColor","pattern","type","patternType","text","GradientFillXform","_BaseXform3","_super3","_this3","stop","gradient","degree","center","left","right","top","bottom","stopXform","stops","forEach","stopModel","parseInt","push","FillXform","_BaseXform4","_super4","_this4","patternFill","gradientFill","addRollback","rollback","commit","validStyle","validPatternValues","reduce","p","v","module","exports"],"sources":["../../../../../lib/xlsx/xform/style/fill-xform.js"],"sourcesContent":["/* eslint-disable max-classes-per-file */\r\nconst BaseXform = require('../base-xform');\r\n\r\nconst ColorXform = require('./color-xform');\r\n\r\nclass StopXform extends BaseXform {\r\n  constructor() {\r\n    super();\r\n\r\n    this.map = {\r\n      color: new ColorXform(),\r\n    };\r\n  }\r\n\r\n  get tag() {\r\n    return 'stop';\r\n  }\r\n\r\n  render(xmlStream, model) {\r\n    xmlStream.openNode('stop');\r\n    xmlStream.addAttribute('position', model.position);\r\n    this.map.color.render(xmlStream, model.color);\r\n    xmlStream.closeNode();\r\n  }\r\n\r\n  parseOpen(node) {\r\n    if (this.parser) {\r\n      this.parser.parseOpen(node);\r\n      return true;\r\n    }\r\n    switch (node.name) {\r\n      case 'stop':\r\n        this.model = {\r\n          position: parseFloat(node.attributes.position),\r\n        };\r\n        return true;\r\n      case 'color':\r\n        this.parser = this.map.color;\r\n        this.parser.parseOpen(node);\r\n        return true;\r\n      default:\r\n        return false;\r\n    }\r\n  }\r\n\r\n  parseText() {}\r\n\r\n  parseClose(name) {\r\n    if (this.parser) {\r\n      if (!this.parser.parseClose(name)) {\r\n        this.model.color = this.parser.model;\r\n        this.parser = undefined;\r\n      }\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\nclass PatternFillXform extends BaseXform {\r\n  constructor() {\r\n    super();\r\n\r\n    this.map = {\r\n      fgColor: new ColorXform('fgColor'),\r\n      bgColor: new ColorXform('bgColor'),\r\n    };\r\n  }\r\n\r\n  get name() {\r\n    return 'pattern';\r\n  }\r\n\r\n  get tag() {\r\n    return 'patternFill';\r\n  }\r\n\r\n  render(xmlStream, model) {\r\n    xmlStream.openNode('patternFill');\r\n    xmlStream.addAttribute('patternType', model.pattern);\r\n    if (model.fgColor) {\r\n      this.map.fgColor.render(xmlStream, model.fgColor);\r\n    }\r\n    if (model.bgColor) {\r\n      this.map.bgColor.render(xmlStream, model.bgColor);\r\n    }\r\n    xmlStream.closeNode();\r\n  }\r\n\r\n  parseOpen(node) {\r\n    if (this.parser) {\r\n      this.parser.parseOpen(node);\r\n      return true;\r\n    }\r\n    switch (node.name) {\r\n      case 'patternFill':\r\n        this.model = {\r\n          type: 'pattern',\r\n          pattern: node.attributes.patternType,\r\n        };\r\n        return true;\r\n      default:\r\n        this.parser = this.map[node.name];\r\n        if (this.parser) {\r\n          this.parser.parseOpen(node);\r\n          return true;\r\n        }\r\n        return false;\r\n    }\r\n  }\r\n\r\n  parseText(text) {\r\n    if (this.parser) {\r\n      this.parser.parseText(text);\r\n    }\r\n  }\r\n\r\n  parseClose(name) {\r\n    if (this.parser) {\r\n      if (!this.parser.parseClose(name)) {\r\n        if (this.parser.model) {\r\n          this.model[name] = this.parser.model;\r\n        }\r\n        this.parser = undefined;\r\n      }\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\nclass GradientFillXform extends BaseXform {\r\n  constructor() {\r\n    super();\r\n\r\n    this.map = {\r\n      stop: new StopXform(),\r\n    };\r\n    // if (model) {\r\n    //   this.gradient = model.gradient;\r\n    //   if (model.center) {\r\n    //     this.center = model.center;\r\n    //   }\r\n    //   if (model.degree !== undefined) {\r\n    //     this.degree = model.degree;\r\n    //   }\r\n    //   this.stops = model.stops.map(function(stop) { return new StopXform(stop); });\r\n    // } else {\r\n    //   this.stops = [];\r\n    // }\r\n  }\r\n\r\n  get name() {\r\n    return 'gradient';\r\n  }\r\n\r\n  get tag() {\r\n    return 'gradientFill';\r\n  }\r\n\r\n  render(xmlStream, model) {\r\n    xmlStream.openNode('gradientFill');\r\n    switch (model.gradient) {\r\n      case 'angle':\r\n        xmlStream.addAttribute('degree', model.degree);\r\n        break;\r\n      case 'path':\r\n        xmlStream.addAttribute('type', 'path');\r\n        if (model.center.left) {\r\n          xmlStream.addAttribute('left', model.center.left);\r\n          if (model.center.right === undefined) {\r\n            xmlStream.addAttribute('right', model.center.left);\r\n          }\r\n        }\r\n        if (model.center.right) {\r\n          xmlStream.addAttribute('right', model.center.right);\r\n        }\r\n        if (model.center.top) {\r\n          xmlStream.addAttribute('top', model.center.top);\r\n          if (model.center.bottom === undefined) {\r\n            xmlStream.addAttribute('bottom', model.center.top);\r\n          }\r\n        }\r\n        if (model.center.bottom) {\r\n          xmlStream.addAttribute('bottom', model.center.bottom);\r\n        }\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n    const stopXform = this.map.stop;\r\n    model.stops.forEach(stopModel => {\r\n      stopXform.render(xmlStream, stopModel);\r\n    });\r\n\r\n    xmlStream.closeNode();\r\n  }\r\n\r\n  parseOpen(node) {\r\n    if (this.parser) {\r\n      this.parser.parseOpen(node);\r\n      return true;\r\n    }\r\n    switch (node.name) {\r\n      case 'gradientFill': {\r\n        const model = (this.model = {\r\n          stops: [],\r\n        });\r\n        if (node.attributes.degree) {\r\n          model.gradient = 'angle';\r\n          model.degree = parseInt(node.attributes.degree, 10);\r\n        } else if (node.attributes.type === 'path') {\r\n          model.gradient = 'path';\r\n          model.center = {\r\n            left: node.attributes.left ? parseFloat(node.attributes.left) : 0,\r\n            top: node.attributes.top ? parseFloat(node.attributes.top) : 0,\r\n          };\r\n          if (node.attributes.right !== node.attributes.left) {\r\n            model.center.right = node.attributes.right ? parseFloat(node.attributes.right) : 0;\r\n          }\r\n          if (node.attributes.bottom !== node.attributes.top) {\r\n            model.center.bottom = node.attributes.bottom ? parseFloat(node.attributes.bottom) : 0;\r\n          }\r\n        }\r\n        return true;\r\n      }\r\n\r\n      case 'stop':\r\n        this.parser = this.map.stop;\r\n        this.parser.parseOpen(node);\r\n        return true;\r\n\r\n      default:\r\n        return false;\r\n    }\r\n  }\r\n\r\n  parseText(text) {\r\n    if (this.parser) {\r\n      this.parser.parseText(text);\r\n    }\r\n  }\r\n\r\n  parseClose(name) {\r\n    if (this.parser) {\r\n      if (!this.parser.parseClose(name)) {\r\n        this.model.stops.push(this.parser.model);\r\n        this.parser = undefined;\r\n      }\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\n// Fill encapsulates translation from fill model to/from xlsx\r\nclass FillXform extends BaseXform {\r\n  constructor() {\r\n    super();\r\n\r\n    this.map = {\r\n      patternFill: new PatternFillXform(),\r\n      gradientFill: new GradientFillXform(),\r\n    };\r\n  }\r\n\r\n  get tag() {\r\n    return 'fill';\r\n  }\r\n\r\n  render(xmlStream, model) {\r\n    xmlStream.addRollback();\r\n    xmlStream.openNode('fill');\r\n    switch (model.type) {\r\n      case 'pattern':\r\n        this.map.patternFill.render(xmlStream, model);\r\n        break;\r\n      case 'gradient':\r\n        this.map.gradientFill.render(xmlStream, model);\r\n        break;\r\n      default:\r\n        xmlStream.rollback();\r\n        return;\r\n    }\r\n    xmlStream.closeNode();\r\n    xmlStream.commit();\r\n  }\r\n\r\n  parseOpen(node) {\r\n    if (this.parser) {\r\n      this.parser.parseOpen(node);\r\n      return true;\r\n    }\r\n    switch (node.name) {\r\n      case 'fill':\r\n        this.model = {};\r\n        return true;\r\n      default:\r\n        this.parser = this.map[node.name];\r\n        if (this.parser) {\r\n          this.parser.parseOpen(node);\r\n          return true;\r\n        }\r\n        return false;\r\n    }\r\n  }\r\n\r\n  parseText(text) {\r\n    if (this.parser) {\r\n      this.parser.parseText(text);\r\n    }\r\n  }\r\n\r\n  parseClose(name) {\r\n    if (this.parser) {\r\n      if (!this.parser.parseClose(name)) {\r\n        this.model = this.parser.model;\r\n        this.model.type = this.parser.name;\r\n        this.parser = undefined;\r\n      }\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  validStyle(value) {\r\n    return FillXform.validPatternValues[value];\r\n  }\r\n}\r\n\r\nFillXform.validPatternValues = [\r\n  'none',\r\n  'solid',\r\n  'darkVertical',\r\n  'darkGray',\r\n  'mediumGray',\r\n  'lightGray',\r\n  'gray125',\r\n  'gray0625',\r\n  'darkHorizontal',\r\n  'darkVertical',\r\n  'darkDown',\r\n  'darkUp',\r\n  'darkGrid',\r\n  'darkTrellis',\r\n  'lightHorizontal',\r\n  'lightVertical',\r\n  'lightDown',\r\n  'lightUp',\r\n  'lightGrid',\r\n  'lightTrellis',\r\n  'lightGrid',\r\n].reduce((p, v) => {\r\n  p[v] = true;\r\n  return p;\r\n}, {});\r\n\r\nFillXform.StopXform = StopXform;\r\nFillXform.PatternFillXform = PatternFillXform;\r\nFillXform.GradientFillXform = GradientFillXform;\r\n\r\nmodule.exports = FillXform;\r\n"],"mappings":"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"}